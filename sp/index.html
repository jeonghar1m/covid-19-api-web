<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>코로나19 감염자 현황</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
    <!-- <script src="covid-api.js"></script> -->
</head>
<body>
    <header>
        <span id="title_name"><h1>코로나19 현황 조회하기</h1></span>
    </header>
    <section>
        <fieldset>
            <legend>도시 선택</legend>
            <table>
                <tr>
                    <td>
                        <input type="button" value="합계" />
                        <input type="button" value="서울" />
                        <input type="button" value="제주" />
                        <input type="button" value="경남" />
                        <input type="button" value="경북" />
                        <input type="button" value="전남" />
                        <input type="button" value="전북" />
                        <input type="button" value="충남" />
                        <input type="button" value="충북" />
                        <input type="button" value="강원" />
                        <input type="button" value="경기" />
                        <input type="button" value="세종" />
                        <input type="button" value="울산" />
                        <input type="button" value="대전" />
                        <input type="button" value="광주" />
                        <input type="button" value="인천" />
                        <input type="button" value="대구" />
                        <input type="button" value="부산" />
                    </td>
                </tr>
            </table>
        </fieldset>
        <p id="decide"></p>
        <p id="clear"></p>
        <p id="death"></p>
        <p id="care"></p>
    </section>
    <script>
        var button = document.getElementsByTagName("input");
        var flag = -1;
        var decide = document.querySelector('#decide');
        var clear = $('#clear');
        var death = $('#death');
        var care = $('#care');

        function ajax() {
            if(button[0].onclick) flag = 0;
            else if(button[1].onclick) flag = 1;
            else if(button[2].onclick) flag = 2;
            else if(button[3].onclick) flag = 3;
            else if(button[4].onclick) flag = 4;
            else if(button[5].onclick) flag = 5;
            else if(button[6].onclick) flag = 6;
            else if(button[7].onclick) flag = 7;
            else if(button[8].onclick) flag = 8;
            else if(button[9].onclick) flag = 9;
            else if(button[10].onclick) flag = 10;
            else if(button[11].onclick) flag = 11;
            else if(button[12].onclick) flag = 12;
            else if(button[13].onclick) flag = 13;
            else if(button[14].onclick) flag = 14;
            else if(button[15].onclick) flag = 15;
            else if(button[16].onclick) flag = 16;
            else if(button[17].onclick) flag = 17;

            fetch('result.php')
            .then( (response) => {
                return response.json();
            })
            .then ( (data) => {
                decide.innerText = "누적 확진자: " + data.object.body.items.item[flag].defCnt;
            });
        }
        button.onclick = ajax;
    </script>
</body>
</html>